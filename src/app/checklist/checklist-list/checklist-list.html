<div class="checklist-list-container">
    <h2>Mis Checklist</h2>
    @if (store.loading()) {
        <p class="loading">Cargando checklists...</p>
    } @else {
        @if (store.checklist().list.length === 0) {
            <div class="no-checklists">
                <p>Aún no tienes checklists creadas. ¡Agrega una para organizar tu viaje!</p>
                <a routerLink="/checklists/create" class="btn-primary">Crear Nueva Checklist</a>
            </div>
        } @else {
            <div class="checklist-grid">
                @for (checklist of store.checklist().list; track checklist.id) {
                    <div class="checklist-card">
                        <div class="checklist-header">
                        <h3>{{ checklist.name }}</h3>
                        <span class="trip-ref">Viaje: ver si se puede poner nombre del viaje</span>
                        </div>

                        <div class="checklist-body">
                        <p>Ítems: {{ checklist.items?.length || 0 }}</p>
                        </div>

                        <div class="checklist-actions">
                        <button class="btn-outline" (click)="router.navigate(['/checklists', checklist.id])">
                            Ver Detalle
                        </button>
                        <button class="btn-outline" (click)="router.navigate(['/checklists', checklist.id, 'edit'])">
                            Editar
                        </button>
                        <button class="btn-danger" (click)="onDelete(checklist.id)">
                            Eliminar
                        </button>
                        </div>
                    </div>
                }
            </div>

            <div class="create">
        <a routerLink="/checklists/create" class="btn-primary">+ Crear Nueva Checklist</a>
        </div>

        <app-pagination
            [currentPage]="store.checklist().pageInfo.currentPage"
            [totalPages]="store.checklist().pageInfo.totalPages"
            (pageChange)="onPageChange($event)">
        </app-pagination>

        }
    }
</div>